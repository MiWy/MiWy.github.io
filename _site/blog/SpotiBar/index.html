<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.4 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>[OLD] SpotiBar: Spotify + Foobar - Michał Wyrwa</title>
<meta name="description" content="[This is a post from my old website. Outdated packages and libraries. Viewer discretion is advised ;-)]">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Michał Wyrwa">
<meta property="og:title" content="[OLD] SpotiBar: Spotify + Foobar">
<meta property="og:url" content="http://localhost:4000/blog/SpotiBar/">


  <meta property="og:description" content="[This is a post from my old website. Outdated packages and libraries. Viewer discretion is advised ;-)]">







  <meta property="article:published_time" content="2017-09-13T17:02:00+02:00">






<link rel="canonical" href="http://localhost:4000/blog/SpotiBar/">













<!-- end _includes/seo.html -->


<link href="/feed.xml"
  type="application/atom+xml" rel="alternate" title="Michał Wyrwa Feed">

<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Serif&display=swap" rel="stylesheet">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<link
    href="https://fonts.googleapis.com/css?family=Fjalla+One|Noto+Sans:400,400i,700,700i&display=swap&subset=latin-ext"
    rel="stylesheet">
<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">Michał Wyrwa</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/papers/" >Papers & Talks</a>
            </li><li class="masthead__menu-item">
              <a href="/teaching/" >Teaching Materials</a>
            </li><li class="masthead__menu-item">
              <a href="/about/" >About</a>
            </li><li class="masthead__menu-item">
              <a href="/posts/" >Posts</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/" >Tags</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name"></h3>
    
    
      <p class="author__bio" itemprop="description">
        <h4>Office hours:</h4> <p></br> Mondays 11-14 </br> Tuesdays 11-12</p>
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      
        
          
            <li><a href="mailto:michal.wyrwa@amu.edu.pl" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
          
        
          
            <li><a href="https://michalwyrwa.youcanbook.me" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Book me</a></li>
          
        
          
            <li><a href="https://orcid.org/0000-0003-4227-1629" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> ORCID</a></li>
          
        
          
            <li><a href="https://github.com/MiWy" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
          
        
          
            <li><a href="https://www.researchgate.net/profile/Michal_Wyrwa" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-researchgate" aria-hidden="true"></i> ResearchGate</a></li>
          
        
          
            <li><a href="https://scholar.google.com/citations?user=eJtcrykAAAAJ&hl=pl&authuser=1&oi=sra" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-google" aria-hidden="true"></i> Scholar</a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="[OLD] SpotiBar: Spotify + Foobar">
    <meta itemprop="description" content="[This is a post from my old website. Outdated packages and libraries. Viewer discretion is advised ;-)]">
    <meta itemprop="datePublished" content="September 13, 2017">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">[OLD] SpotiBar: Spotify + Foobar
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Table of Contents</h4></header>
              <ul class="toc__menu">
  <li><a href="#spotibar">SPOTIBAR</a>
    <ul>
      <li><a href="#co">Co</a></li>
      <li><a href="#czym">Czym</a></li>
    </ul>
  </li>
  <li><a href="#part-2">PART 2</a>
    <ul>
      <li><a href="#czym-1">Czym</a></li>
      <li><a href="#co-tam-jest">Co tam jest</a></li>
      <li><a href="#kod-źródłowy">Kod źródłowy</a></li>
    </ul>
  </li>
  <li><a href="#part-3">PART 3</a></li>
</ul>
            </nav>
          </aside>
        
        <p>[This is a post from my old website. Outdated packages and libraries. Viewer discretion is advised ;-)]</p>

<h2 id="spotibar">SPOTIBAR</h2>

<p>Spotify zacząłem używać od momentu jak wprowadzili abonament w PLN. Kilka lat doświadczenia się zatem zebrało i choć bardzo sobie cenię tę usługę, to jest jedna rzecz, która mi strasznie w niej przeszkadza.</p>

<p><img src="/assets/images/oldblog/13-09-2017-spotify-desktop.png" alt="image-center" class="align-center" /></p>

<p>Od razu zaznaczę, że należę do grona ludzi, którzy trzymać swoją kolekcję muzyczną w ordnungu. Jak kupuję płytę CD, to znajduję dla niej miejsce na odpowiedniej półeczce, scrobbluję do <a href="https://www.last.fm">last.fm</a> z iTunesa, Spotify’a i telefonu, staram się pamiętać czy dany album mam na nośniku fizycznym, cyfrowym, w streamingu, i tak dalej.
Zarządzanie kolekcją w Spotify kuleje. Jak tylko nasze playlisty przekroczą te kilkadziesiąt utworów, wzrokowe odnalezienie się w nich jest dla mnie niemożliwe. Jest searchbar po playliście, ale co z utworami, których nazwy nie potrafię przywołać a potrafię jedynie rozpoznać? Poza tym, jakbym chciał wszystko załatwiać klawiaturowo, to używałbym <a href="https://www.musicpd.org">mpd</a> + <a href="https://www.mopidy.com">mopidy</a> w terminalu.
Listy mają za wysoką linię wiersza (nawet po zoom- na maksimum), nie mogę playlisty pokazać jako zbioru miniatur okładek/wykonawców, nie mogę szukać jednocześnie po wszystkich swoich playlistach/bibliotece (tylko po całej bazie utwórów), i tak dalej. Cała koncepcja biblioteki w Spotify leży i kwiczy. Gdybym miał przenieść tam bibliotekę wykonawców z last.fm, nie wiem w jaki sposób miałbym cokolwiek w niej znaleźć.
Koniec końców moja przygoda ze Spotify wygląda tak, że nigdy wcześniej tak dużo nowej muzyki nie słuchałem, ale też nigdy wcześniej tak mało wykonawców/albumów nie zapamiętywałem. Przyjąłem więc rozwiązanie robocze: playlista jest albo pod gatunek albo pod dany temat. Przykładowo, wczesny black metal ma swoją playlistę, podobnie jak muzyka pasująca do pracy przy komputerze, czy jazdy samochodem. Mam też playlisty nieeleganckie: albumy do przesłuchania, utwory do uporządkowania i tym podobne.
Być może taki urok czasów, presji wywoływanej samą możliwością słuchania czegokolwiek spośród X milionów dostępnych w Spotify utworów. Póki co nie potrafię tego rozstrzygnąć, ale pamiętam taki programik jak <a href="https://www.foobar2000.org">foobar2000</a>. Był idealny dla moich potrzeb. Prosty, konfigurowalny do cna, w którym od razu wiedziałem, gdzie i w jakim miejscu kryje się ten utwór, na który mam w danym momencie ochotę.</p>

<p><img src="/assets/images/oldblog/13-09-2017-spotify-foobar-foobar.png" alt="image-center" class="align-center" /></p>

<p>Foobar2000 natywnie działa na Windowsie. Windowsa w domu nie posiadam od lat (Linux/MacOS). Uruchamianie na wrapperach, WINE’ach sprawia, że przestaję odczuwać radość z prostoty tego programu, poza tym pozostaje kwestia dostępu do bazy Spotify.
Kończąc ten przydługawy wywód, powziąłem następujące wyzwanie: napiszę klienta webowego Spotify, który przynajmniej w małym wymiarze będzie mi przypominać korzystanie z foobara. Jeśli nie pomoże mi to odnaleźć się w kolekcji muzycznej, to będę już po wsze czasy wiedzieć, że albo zrezygnuję ze streamingu albo zmienię podejście do porządkowania muzyki.</p>

<h3 id="co">Co</h3>

<ul>
  <li>Webowy klient Spotify</li>
  <li>Przynajmniej częściowa analogia interfejsu do podstawowego foobara</li>
</ul>

<h3 id="czym">Czym</h3>

<ul>
  <li><a href="https://developer.spotify.com/web-api/">Spotify Web API</a></li>
  <li><a href="https://github.com/thelinmichael/spotify-web-api-java">Spotify Web API Java</a> - wrapper API dla Javy</li>
  <li><a href="http://spring.io">Spring MVC</a></li>
  <li>Póki nie będzie innych potrzeb: lokalny <a href="http://tomcat.apache.org">Tomcat</a> albo <a href="https://www.mamp.info/en/">MAMP</a> (jeśli okaże się, że baza danych to jest to)</li>
  <li><a href="https://eclipse.org">Eclipse</a></li>
</ul>

<h2 id="part-2">PART 2</h2>

<p>W poprzednim wpisie na <a href="http://doksaprosta.scholaris-edu.pl/2017/09/spotify-a-la-foobar-1-intro/">ten temat</a> obiecałem zrobić spotify’owy odpowiednik foobara. Choć idea była szczytna, to jednak minęła się trochę z momentem dziejowym. Gdybym obecne playlisty i bibliotekę Spotify miał na dysku twardym, to korzystając z Foobara bym się dawno… pochlastał. Problem leży raczej w moim podejściu do muzyki, aniżeli do interfejsu ;). Nadmiernie eklektyczny gust najwyraźniej też nie jest zbyt dobry.</p>

<p>Ale to nie powód żeby całkiem rezygnować. Więc zrobiłem coś takiego:</p>

<p><img src="/assets/images/oldblog/Screen-Shot-2018-01-05-at-23.53.35.png" alt="image-center" class="align-center" /></p>

<p>Spotify w swoim API oferuje coś zwanego Recommendation Request. Zwraca on listę utworów spełniających rozmaite kryteria. Mamy tutaj (oprócz gatunku/artysty/utworu) współczynniki takie jak: taneczność, pozytywność, energiczność, tempo, tonacja, czas trwania, popularność i inne.</p>

<p>Czyli możemy szukać czego podobnego do danego wykonawcy, co dodatkowo nie jest popularne</p>

<p>Pola wyszukiwania są ustawione z walidacją, także w przypadku błędnego kryterium otrzymuje informację zwrotną, a nie błąd 400/502/itd. ;). Powinno to ustrzec przed wystąpieniem przynajmniej części wyjątków, których obsługą się nie zająłem…</p>

<p><img src="/assets/images/oldblog/Screen-Shot-2018-01-06-at-00.16.03.png" alt="image-center" class="align-center" /></p>

<p>Wyniki wypluwane są w bootstrapowej siatce (lekko zmodyfikowany motyw <a href="https://bootswatch.com/3/superhero/">Superhero</a>), z linkami do desktopowego klienta Spotify:</p>

<p><img src="/assets/images/oldblog/Screen-Shot-2018-01-06-at-00.06.58.png" alt="image-center" class="align-center" /></p>

<p>Wybrany na tym etapie pracy z API sposób autoryzacji z serwerami Spotify nie wymaga od użytkownika podawania jakichkolwiek danych (Client Credential flow bodajże), więc nie można zapisywać wyników automatycznie do playlist.</p>

<p>Na boku chciałbym wyrazić ogromny smutek, że ludzie spoza zespołu Spotify nie mają już dostępu do API EchoNest. <a href="http://everynoise.com/engenremap.html">Every Noise at Once</a> to doskonały przykład tego, co można z tych danych wyciągnąć… Póki co udostępniane przez Szwedów API jest bardziej okrojone :/.</p>

<p>Kolejny smutek wywołało u mnie kryterium popularności. Niestety, Spotify nie sumuje różnych edycji tych samych utworów. Jeżeli jakiś utwór takiego Motorhead był wydany kilka razy na różnych składankach, reedycjach albumów, itd., to każdy z nich ma wszystkie współczynniki wyliczane osobno. Dlatego Ace of Spades potrafi nasza apka wypluć z zerową popularnością :D. A taka Madonna posiada utwory mniej popularne od niektórych Ulvera.</p>

<p>Podsumowując, oto - działający po wrzuceniu na tomcata - sposób na bardziej zaawansowane wyszukiwanie w bazie Spotify.</p>

<h3 id="czym-1">Czym</h3>

<ul>
  <li><a href="https://developer.spotify.com/web-api/">Spotify Web API</a> <a href="https://github.com/thelinmichael/spotify-web-api-java">wrapper dla Javy</a> (forkowany przez <a href="https://github.com/dhughes/spotify-web-api-java">dhughes</a>) (wiem, że obecnie znowu rozbudowują główne repo, ale linkowana wersja działa mi wystarczająco dobrze :-))</li>
  <li><a href="https://projects.spring.io/spring-framework/">Spring Framework 4</a></li>
  <li><a href="http://hibernate.org/validator/">Hibernate Validator</a></li>
  <li><a href="https://tomcat.apache.org/download-80.cgi">Tomcat 8</a></li>
</ul>

<h3 id="co-tam-jest">Co tam jest</h3>

<ul>
  <li>Walidacja form, w tym własny walidator</li>
  <li>Builder pattern zbudowany nad builderem z wrappera (to było chyba bardzo głupie rozwiązanie, ale nie miałem pomysłu jak inaczej to zrobić, więcej o tym w przyszłości)</li>
  <li>Kilka .jsp, w nich zaś pętle i bootstrap</li>
</ul>

<h3 id="kod-źródłowy">Kod źródłowy</h3>

<p>(trzeba zmodyfikować Stringi w SpotifyApiDAO.java na własne klucze developerskie Spotify)</p>

<p>Jak zwykle na <a href="https://github.com/MiWy/doksaprosta_blog_code_snippets/tree/master/SpotiBar">GitHub</a>.</p>

<p><img src="/assets/images/oldblog/Screen-Shot-2018-01-05-at-23.53.35.png" alt="image-center" class="align-center" /></p>

<h2 id="part-3">PART 3</h2>

<p>Po przerwie spowodowanej perturbacjami niezwiązanymi z programowaniem, zdecydowałem się spróbować innego języka. Ostatni <a href="http://doksaprosta.scholaris-edu.pl/2018/01/spotify-a-la-spotibar-2-jednak-nie-foobar/">mini-projekcik</a> był fajny: wykorzystanie API, aplikacja internetowa, framework Javowy. Chcąc spróbować sił w czymś podobnym, wziąłem sobie na warsztat ten sam projekt, ale pisany w JS.</p>

<p>Po dłuższych kłótniach z JS-owym stoiskiem <a href="https://hackernoon.com/how-it-feels-to-learn-javascript-in-2016-d3a717dd577f">Popularnych, Ważnych i Na Czasie</a> frameworków, wybrałem AngularJS.</p>

<p>Aplikacja działa, ale daleko jej do bycia ślicznotką. Bebechem CSSowym jest nadal Bootstrap, ale póki co i tak wygląda jak strona z lat 90. :-).</p>

<p>Estetykę poprawimy w kolejnych wpisach, jak już zostaną opowiedziane koleje losu od zera (‘a gdzie w Javascripcie jest metoda main()?’) do <del>bohatera</del> zera i pół ;-).</p>

<p>Tymczasem link do apki <a href="https://miwy.github.io/spotify-recommendations-app-js/">tutaj.</a></p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#coding" class="page__taxonomy-item" rel="tag">coding</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#blog" class="page__taxonomy-item" rel="tag">blog</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2017-09-13T17:02:00+02:00">September 13, 2017</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="/blog/EnumSql/" class="pagination--pager" title="[OLD] Java 101: Enum + Servlets
">Previous</a>
    
    
      <a href="/blog/AngularJS-Spotibar/" class="pagination--pager" title="[OLD] SpotiBar: ANGULARJS
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><input type="search" id="search" aria-placeholder="Enter your search term..." class="search-input" tabindex="-1" placeholder="Enter your search term..." />
    <div id="results" class="results"></div></div>

      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2019 Michał Wyrwa. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin="anonymous"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
