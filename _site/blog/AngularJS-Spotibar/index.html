<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.4 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>[OLD] SpotiBar: ANGULARJS - Michał Wyrwa</title>
<meta name="description" content="[This is a post from my old website. Outdated packages and libraries. Viewer discretion is advised ;-)]">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Michał Wyrwa">
<meta property="og:title" content="[OLD] SpotiBar: ANGULARJS">
<meta property="og:url" content="http://localhost:4000/blog/AngularJS-Spotibar/">


  <meta property="og:description" content="[This is a post from my old website. Outdated packages and libraries. Viewer discretion is advised ;-)]">







  <meta property="article:published_time" content="2018-04-13T17:02:00+02:00">






<link rel="canonical" href="http://localhost:4000/blog/AngularJS-Spotibar/">













<!-- end _includes/seo.html -->


<link href="/feed.xml"
  type="application/atom+xml" rel="alternate" title="Michał Wyrwa Feed">

<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Serif&display=swap" rel="stylesheet">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<link
    href="https://fonts.googleapis.com/css?family=Fjalla+One|Noto+Sans:400,400i,700,700i&display=swap&subset=latin-ext"
    rel="stylesheet">
<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">Michał Wyrwa</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/papers/" >Papers & Talks</a>
            </li><li class="masthead__menu-item">
              <a href="/teaching/" >Teaching Materials</a>
            </li><li class="masthead__menu-item">
              <a href="/about/" >About</a>
            </li><li class="masthead__menu-item">
              <a href="/posts/" >Posts</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/" >Tags</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name"></h3>
    
    
      <p class="author__bio" itemprop="description">
        <h4>Office hours:</h4> <p></br> Mondays 11-14 </br> Tuesdays 11-12</p>
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      
        
          
            <li><a href="mailto:michal.wyrwa@amu.edu.pl" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
          
        
          
            <li><a href="https://michalwyrwa.youcanbook.me" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Book me</a></li>
          
        
          
            <li><a href="https://orcid.org/0000-0003-4227-1629" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> ORCID</a></li>
          
        
          
            <li><a href="https://github.com/MiWy" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
          
        
          
            <li><a href="https://www.researchgate.net/profile/Michal_Wyrwa" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-researchgate" aria-hidden="true"></i> ResearchGate</a></li>
          
        
          
            <li><a href="https://scholar.google.com/citations?user=eJtcrykAAAAJ&hl=pl&authuser=1&oi=sra" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-google" aria-hidden="true"></i> Scholar</a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="[OLD] SpotiBar: ANGULARJS">
    <meta itemprop="description" content="[This is a post from my old website. Outdated packages and libraries. Viewer discretion is advised ;-)]">
    <meta itemprop="datePublished" content="April 13, 2018">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">[OLD] SpotiBar: ANGULARJS
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Table of Contents</h4></header>
              <ul class="toc__menu">
  <li><a href="#part-1">PART 1</a>
    <ul>
      <li><a href="#użyte-frameworki-javascript-i-narzędzia">Użyte frameworki JavaScript i narzędzia</a></li>
      <li><a href="#ustawiamy-workflow">Ustawiamy workflow</a></li>
    </ul>
  </li>
  <li><a href="#part-2">PART 2</a>
    <ul>
      <li><a href="#bazowy-plik-indexhtml">Bazowy plik index.html</a>
        <ul>
          <li><a href="#html">&lt;html&gt;</a></li>
          <li><a href="#head">&lt;head&gt;</a></li>
          <li><a href="#body">&lt;body&gt;</a></li>
        </ul>
      </li>
      <li><a href="#autoryzacja-oauth">Autoryzacja OAuth</a>
        <ul>
          <li><a href="#callbackhtml">callback.html</a></li>
          <li><a href="#appjs">app.js</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#logujemy-się">Logujemy się</a></li>
  <li><a href="#part-3">PART 3</a>
    <ul>
      <li><a href="#indexhtml">index.html</a></li>
      <li><a href="#appjs-2">app.js (2)</a></li>
      <li><a href="#searchhtml">search.html</a></li>
      <li><a href="#appjs-searchcontroller">app.js SearchController</a></li>
      <li><a href="#resultscontroller-i-sharingresultsservice">ResultsController i SharingResultsService</a></li>
      <li><a href="#resultshtml">Results.html</a></li>
    </ul>
  </li>
  <li><a href="#part-4">PART 4</a>
    <ul>
      <li><a href="#estetyka">Estetyka</a>
        <ul>
          <li><a href="#searchhtml-1">Search.html</a></li>
          <li><a href="#appjs-3">app.js (3)</a></li>
          <li><a href="#czego-nie-ma-co-można-zmienić">Czego nie ma, co można zmienić</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
            </nav>
          </aside>
        
        <p>[This is a post from my old website. Outdated packages and libraries. Viewer discretion is advised ;-)]</p>

<h2 id="part-1">PART 1</h2>

<p>Zgodnie z poprzednim wpisem, rozbierzemy SpotiBar w wersji JavaScript na czynniki pierwsze. Użyjemy AngularJS, JavaScript i API Spotify.</p>

<p>Jako że to pierwszy kontakt z JavaScriptem jako takim i choć budowana przez nas aplikacja pewnie nie spełnia kryteriów dobrego kodu, to przynajmniej pokazuje, że mimo <a href="https://risingstars.js.org/2017/en/">Mnogości</a> JS-owych frameworków i możliwości, rozpoczęcie zabawy w developerkę nie jest trudne.</p>

<h3 id="użyte-frameworki-javascript-i-narzędzia">Użyte frameworki JavaScript i narzędzia</h3>

<ul>
  <li>JavaScript</li>
  <li><a href="https://angularjs.org">AngularJS</a> 1.6.x (na ten moment jest to wersja 1.6.9)</li>
  <li>Kilka paczek Angularowych: <a href="https://github.com/angular-slider/angularjs-slider">angularjs-slider</a>, <a href="https://vitalets.github.io/checklist-model/">checklist-model</a>, <a href="https://github.com/eddiemoore/angular-spotify">angular-spotify</a></li>
  <li><a href="https://developer.spotify.com/">Konto developerskie na Spotify</a></li>
  <li>Terminal, przeglądarka i edytor tekstu</li>
</ul>

<h3 id="ustawiamy-workflow">Ustawiamy workflow</h3>

<p>Potrzebujemy małego serwera, żeby obsługiwać zwroty z serwera Spotify. Na Macu sprawa jest prosta, bo mamy preinstalowanego Pythona. Serwer lokalny odpalamy komendą ‘python -m SimpleHTTPServer 8888’, gdzie pod 8888 możemy wstawić interesujący nas port.</p>

<p><img src="/assets/images/oldblog/Screen-Shot-2018-04-13-at-08.55.48.png" alt="image-center" class="align-center" /></p>

<p>Alternatywne rozwiązania:</p>

<ul>
  <li><a href="https://atom.io/packages/atom-live-server">atom-live-server</a>, dla użytkowników edytora <a href="https://atom.io/">Atom</a></li>
  <li><a href="https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer">Live Server</a>, dla użytkowników edytora <a href="https://code.visualstudio.com/">Visual Studio Code</a> (pomimo kilkudniowych prób, nie udało mi się za jego pomocą obsłużyć callbacku od Spotify)</li>
  <li><a href="https://www.mamp.info/en/">MAMP</a> i podobne</li>
</ul>

<p>Jeżeli używamy sposobu terminalowego, to trzeba pamiętać o odpaleniu komendy w katalogu naszego projektu, a nie np. w katalogu domowym.</p>

<p>Mając już prosty serwer możemy stworzyć folder projektu z podfolderami: <code class="highlighter-rouge">app</code> (w nim folder <code class="highlighter-rouge">lib</code>) i <code class="highlighter-rouge">views</code>. Struktura projektu jest konwencją, ale że ze ścieżek do plików będziemy korzystać, to warto pamiętać, gdzie jest jaki plik.</p>

<p>Ostatni krok to zarejestrowanie aplikacji w konsoli Spotify. Wchodzimy w <a href="https://developer.spotify.com/my-applications/">My Apps</a> i po zalogowaniu tworzymy nową aplikację.</p>

<p><img src="/assets/images/oldblog/spotify_create_new_app.jpg" alt="image-center" class="align-center" /></p>

<p>Następnie w jej ustawieniach dodajemy adres do callbacku, który będziemy potrzebować, by obsłużyć autoryzację ze strony Spotify. (możemy wpisać adres serwera lokalnego, pamiętając jednak, by kierował on na ten port, na który mamy ustawiony serwer).</p>

<p>![image-center](/assets/images/oldblog/spotify_callback_url.jpg{: .align-center}</p>

<p>Na koniec kwestia bibliotek Angularowych. Można je ściągnąć z podlinkowanych wcześniej stron. Na repozytorium aplikacji też są wrzucone, więc równie dobrze można je pobrać <a href="https://github.com/MiWy/spotify-recommendations-app-js/tree/gh-pages/app/lib">stąd</a>. Obojętnie skąd je weźmiemy, mają wylądować w katalogu <code class="highlighter-rouge">app/lib</code>.</p>

<h2 id="part-2">PART 2</h2>

<p>Drogą przypomnienia, mamy przygotowane biblioteki JavaScriptowe, strukturę folderów projektu(*) utworzoną aplikację w konsoli dewelopera Spotify i serwer. Odpalamy serwer w katalogu naszego projektu.</p>

<p><strong>*Oprócz wspomnianych w poprzednim wpisie plików, skopiować można również <a href="https://github.com/MiWy/spotify-recommendations-app-js/blob/gh-pages/app/style.css">ten</a> plik CSS. Wtedy na ekranie powinno się pojawiać dokładnie to samo :).</strong></p>

<h3 id="bazowy-plik-indexhtml">Bazowy plik index.html</h3>

<p>Użytkownik naszej prostej aplikacji będzie de facto przemieszczać się pomiędzy dwoma stronami: na jednej będzie ustalać kryteria wyszukiwania rekomendacji, na drugiej zaś wyświetlane będą wyniki. Nie będziemy do tego celu tworzyć osobnych pełnoprawnych plików HTML, tylko skorzystamy z obecnej w AngularJS możliwości dynamicznego podmieniania elementów HTML.</p>

<p>Naszym bazowym plikiem będzie umieszczony w wyjściowym folderze naszego projektu plik <code class="highlighter-rouge">index.html</code>. Pełen kod źródłowy znajduje się <a href="https://github.com/MiWy/spotify-recommendations-app-js/blob/gh-pages/index.html">w repozytorium</a>, tutaj opiszę tylko kluczowe kwestie.</p>

<h4 id="html">&lt;html&gt;</h4>

<p>Oznaczenie Angularowe pojawia się już w pierwszym znaczniku:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">"spotiBar"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">ng-app</code> mówi Angularowi jaki jest najbardziej podstawowy element naszej aplikacji, rejestruje ją dla frameworku. Równie dobrze można w tym przypadku dać ten atrybut w elemencie <code class="highlighter-rouge">body</code>.</p>

<h4 id="head">&lt;head&gt;</h4>

<p>W elemencie <code class="highlighter-rouge">&lt;head&gt;</code> mamy zbiór odwołań do plików .css i .js. Niektóre z nich mają standardową strukturę, przykładowo dla elementu <code class="highlighter-rouge">script</code> jest podana ścieżka do pliku w określonej lokalizacji na dysku. Dla celów pokazowych, nie wszystkie pliki są tak ładowane :).  Na przykład pliki Bootstrapowe są ładowane z serwerów Bootstrapa, nie z dysku.</p>

<p>Ma to swoje plusy i minusy, z jednej strony jest szansa, że takie korzystanie z <a href="https://gtmetrix.com/why-use-a-cdn.html">CDN</a> (<em>content delivery network</em>) pozwoli na szybsze załadowanie strony. Z drugiej strony, jak serwery, na których jest dany plik umieszczony, się posypią, to nasza strona też może ucierpieć.</p>

<p>Ostatnią sprawą jest znacznik <code class="highlighter-rouge">&lt;base /&gt;</code>. Ułatwia on życie, pozwalając na zdefiniowanie adresu bazowego naszej strony internetowej. Pozostawienie go na <code class="highlighter-rouge">/</code> oznacza, że podstrony będą się ładować na zasadzie:</p>

<p>www.example.com/podstrona</p>

<p>Zaś ustawienie <code class="highlighter-rouge">&lt;base href="/bazowylink/"/&gt;</code> spowoduje, że strony będą szukane pod:</p>

<p>www.example.com/bazowylink/podstrona</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;head&gt;</span>
      <span class="nt">&lt;title&gt;</span>SpotiBar<span class="nt">&lt;/title&gt;</span>
      <span class="nt">&lt;base</span> <span class="na">href=</span><span class="s">"/"</span><span class="nt">&gt;</span>
    
      <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"</span> 
        <span class="na">integrity=</span><span class="s">"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"</span>
        <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"https://fonts.googleapis.com/css?family=Lobster"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"https://fonts.googleapis.com/css?family=Cabin"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"app/style.css"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://code.jquery.com/jquery-3.2.1.slim.min.js"</span> 
        <span class="na">integrity=</span><span class="s">"sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"</span>
        <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>
      <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"</span> 
        <span class="na">integrity=</span><span class="s">"sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"</span>
        <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>
      <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"</span> 
        <span class="na">integrity=</span><span class="s">"sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"</span>
        <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>
      <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"app/lib/angular.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
      <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"app/lib/angular-route.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
      <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"app/lib/checklist-model.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
      <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"app/lib/angular-spotify.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span> <span class="na">href=</span><span class="s">"app/lib/rzslider.min.css"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"app/lib/rzslider.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
      <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"app/app.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
</code></pre></div></div>

<h4 id="body">&lt;body&gt;</h4>

<p>W tym momencie zrobimy tylko pasek nawigacyjny z przyciskiem do logowania.</p>

<p>Kod wygląda tak:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;nav</span> <span class="na">ng-controller=</span><span class="s">"LoginController"</span> <span class="na">class=</span><span class="s">"navbar navbar-inverse altnavbg"</span> <span class="na">role=</span><span class="s">"navigation"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container-fluid"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"navbar-header"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"navbar-brand"</span> <span class="na">href=</span><span class="s">"/#!/search"</span><span class="nt">&gt;</span>SpotiBar - Advanced Spotify Search<span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"nav navbar-nav navbar-right"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"btn btn-default navbar-btn"</span> <span class="na">ng-click=</span><span class="s">"login()"</span><span class="nt">&gt;</span>Login<span class="nt">&lt;/button&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/nav&gt;</span>
</code></pre></div></div>

<p>Prawie wszystkie atrybuty elementów są Bootstrapowe i nie będziemy ich w tym miejscu tłumaczyć. Dokumentacja Bootstrapa jest przyjazna użytkownikowi :). Natomiast kilka rzeczy jest Angularowych. Atrybut <code class="highlighter-rouge">ng-controller</code> jest dyrektywą Angulara. Określa jaki fragment kodu będzie obsługiwać wskazaną część strony.</p>

<p>Warta zwrócenia uwagi jest też wartość atrybutu <code class="highlighter-rouge">href</code> dla naszego <code class="highlighter-rouge">navbar-brand</code>, czyli <code class="highlighter-rouge">/#!/search</code>. <code class="highlighter-rouge">#!</code>  bierze się stąd, że delegujemy przekierowania Angularowi, a on domyślnie wykorzystuje to wyrażenie. Jak zobaczymy w kolejnej części, link ten nie tyle ładuje zupełnie nową stronę HTML, co mówi Angularowi, aby zmodyfikował DOM i pokazał opcje wyszukiwania na aktualnie wyświetlanej stronie (czyli index.html). <a href="https://www.digitalocean.com/community/tutorials/introduction-to-the-dom">Co to DOM</a>?</p>

<p>Ostatnia sprawa to dyrektywa <code class="highlighter-rouge">ng-click</code>. Znowu Angular, wykorzystamy ją, by zarejestrować chęć zalogowania się przez użytkownika. O różnicy pomiędzy <code class="highlighter-rouge">ng-click</code> a <code class="highlighter-rouge">onclick</code> można poczytać na <a href="https://stackoverflow.com/a/20274848">stackoverflow</a>.</p>

<h3 id="autoryzacja-oauth">Autoryzacja OAuth</h3>

<p>Do korzystania z API Spotify użytkownik musi przejść przez proces <a href="https://developer.spotify.com/web-api/authorization-guide/">autoryzacji</a>. Uwierzytelnienie polega na wysłaniu żądania wraz z kluczem naszej aplikacji i odebraniu tokena zwrotnego. Token musi być następnie dołączany do wysyłanych przez użytkownika kolejnych zapytań do API.</p>

<p>Do komunikacji z API skorzystamy z przygotowanego pod AngularJS <a href="https://github.com/eddiemoore/angular-spotify">angular-spotify</a>.</p>

<h4 id="callbackhtml">callback.html</h4>

<p>Potrzebujemy prostego pliku HTML, do którego Spotify będzie odsyłać token po skończonej autoryzacji. Autor angular-spotify dostarcza templatkę takowego pliku, <a href="https://github.com/eddiemoore/angular-spotify/blob/master/examples/callback.html">o tutaj</a>. Wystarczy nam ona w zupełności. Kopiujemy ją do głównego folderu naszego projektu.</p>

<p>Autoryzacja przebiega żądaniem GET, więc ten mały skrypcik w pliku <code class="highlighter-rouge">callback.html</code> patrzy po pasku adresowym okna i, jeżeli go znajdzie, zapisuje token w pamięci przeglądarki (<code class="highlighter-rouge">localStorage</code>) i zamyka okno, a jeśli nie to tylko zamyka okno.</p>

<p>W poprzednim wpisie ustawialiśmy <strong>Redirect URI</strong> dla naszej aplikacji Spotify (w <a href="https://beta.developer.spotify.com/dashboard">konsoli dewelopera</a>). Jeżeli zmienimy nazwę <code class="highlighter-rouge">callback.html</code> na coś innego, to musimy również w ustawieniach aplikacji zmienić przekierowanie.</p>

<h4 id="appjs">app.js</h4>

<p>Zakładając, że w naszym pliku <code class="highlighter-rouge">index.html</code> mamy wszystko to, co powyżej opisane, tworzymy nowy plik: <code class="highlighter-rouge">app.js</code> w folderze <code class="highlighter-rouge">app</code>.</p>

<p>W pierwszej kolejności, musimy stworzyć instancję naszej aplikacji (w zasadzie - moduł) dla AngularJS. Składnia wygląda tak:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">const</span> <span class="nx">spotiBar</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"spotiBar"</span><span class="p">,</span> <span class="p">[</span>
      <span class="s2">"spotify"</span>
    <span class="p">]);</span>
</code></pre></div></div>

<p>O ile w pliku <code class="highlighter-rouge">index.html</code> nadaliśmy wartość <code class="highlighter-rouge">spotiBar</code> atrybutowi <code class="highlighter-rouge">ng-app</code>, to tutaj musi się pojawić ta sama nazwa.</p>

<p>W nawiasie kwadratowym wymieniamy paczki, z których będziemy korzystać. Póki co będziemy korzystać tylko z “spotify” właśnie :). Resztę dodamy później.</p>

<p>Następnie czeka nas odrobinę konfiguracji:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">spotiBar</span><span class="p">.</span><span class="nx">config</span><span class="p">([</span>
      <span class="s2">"SpotifyProvider"</span><span class="p">,</span>
      <span class="kd">function</span><span class="p">(</span><span class="nx">SpotifyProvider</span><span class="p">)</span> <span class="p">{</span>
        
        <span class="nx">SpotifyProvider</span><span class="p">.</span><span class="nx">setClientId</span><span class="p">(</span><span class="s2">"CLIENT_ID"</span><span class="p">);</span>
        <span class="nx">SpotifyProvider</span><span class="p">.</span><span class="nx">setRedirectUri</span><span class="p">(</span><span class="s2">"http://localhost:8080/callback.html"</span><span class="p">);</span>
        <span class="nx">SpotifyProvider</span><span class="p">.</span><span class="nx">setScope</span><span class="p">(</span><span class="s2">"playlist-read-private"</span><span class="p">);</span>
    
        <span class="k">if</span> <span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s2">"spotify-token"</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">SpotifyProvider</span><span class="p">.</span><span class="nx">setAuthToken</span><span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s2">"spotify-token"</span><span class="p">));</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Token got from localStorage."</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"There was no token in localStorage."</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">]);</span>
</code></pre></div></div>

<p>W nawiasie kwadratowym wymieniamy, ponownie, zależności (w tym wypadku <code class="highlighter-rouge">SpotifyProvider</code> z angular-spotify), a następnie implementujemy funkcję konfiguracyjną.</p>

<p>Pod <code class="highlighter-rouge">CLIENT_ID</code> podajemy client id wzięty ze strony naszej aplikacji w konsoli dewelopera Spotify (<strong>NIE</strong> secret, tylko “zwykły”).</p>

<p>Pod <code class="highlighter-rouge">.setRedirectUri</code>wklepujemy adres do callbacku, zgodny z naszym serwerem lokalnym, nazwą pliku callbackowego, oraz zgodny z tym, który wpisaliśmy w ustawieniach aplikacji w konsoli Spotify*****.</p>

<p>Pod <code class="highlighter-rouge">.setScope</code> definiujemy jakie upoważnienia użytkownik naszej aplikacji ma nam nadać (dla celów przykładowych u nas jest to odczytanie jego prywatnych playlist). Pełny zestaw scope’ów znaleźć można <a href="https://developer.spotify.com/web-api/using-scopes/">tutaj</a>.</p>

<p>Wyrażenie warunkowe <code class="highlighter-rouge">if</code> sprawdza, czy w pamięci lokalnej przeglądarki jest już token. Jeśli tak, zapisujemy go do <code class="highlighter-rouge">SpotifyProvidera</code> i dostajemy zwrotny komunikat w konsoli. Jeśli nie, to czeka nas tylko komunikat zwrotny w konsoli ;).</p>

<p>Ok. Brakuje nam tylko jednej rzeczy: kodu kontrolera, odpowiedzialnego za logowanie użytkownika!</p>

<pre><code class="language-Javascript">    spotiBar.controller("LoginController", [
      "$scope",
      "Spotify",
      function($scope, Spotify) {
        $scope.login = function() {
          Spotify.login().then(
            function(data) {
              console.log(data);
              Spotify.setAuthToken(data);
              alert("You are now logged in");
            },
            function() {
              console.log("didn't log in");
            }
          );
        };
      }
    ]);
</code></pre>

<p>Podobnie jak poprzednio, na początku nawiasu kwadratowego wymieniamy potrzebne zależności (<code class="highlighter-rouge">$scope</code> i <code class="highlighter-rouge">Spotify</code>). <code class="highlighter-rouge">$scope</code> to obiekt w Angular pozwalający na komunikację pomiędzy HTML a JS.</p>

<p>Czyli pisząc <code class="highlighter-rouge">$scope.login =</code>, definiujemy funkcję, do której w pliku <code class="highlighter-rouge">index.html</code> odwoływaliśmy się pisząc <code class="highlighter-rouge">ng-click=login()</code>.</p>

<p>Funkcja <code class="highlighter-rouge">Spotify.login()</code>, z kolei, to metoda z angular-spotify, wysyłająca żądanie autoryzacji do Spotify. Po zakończeniu autoryzacji, o ile zakończyła się sukcesem, zapisuje informację o tokenie w obiekcie Spotify, którym później będziemy wyszukiwać rekomendacji muzycznych. Jest też wyświetlany alert z informacją o logowaniu.</p>

<h2 id="logujemy-się">Logujemy się</h2>

<p>Jeśli nasz serwer nadal jest włączony to wchodzimy na nasze http://localhost:8888 (ew. inny port) i patrzymy. Zakładając, że mamy te same pliki CSS, powinno to wyglądać tak:</p>

<p><img src="/assets/images/oldblog/Screen-Shot-2018-04-14-at-17.58.32.png" alt="image-center" class="align-center" /></p>

<p>Gdy klikniemy w przycisk “Login”, wyskoczy okienko proszące o potwierdzenie (ew. zalogowanie do Spotify, jeśli nie byliście w przeglądarce zalogowani). Po jego kliknięciu, przekierowanie pchnie token do callback.html, okienko zniknie, a nam ukaże się:</p>

<p><img src="/assets/images/oldblog/Screen-Shot-2018-04-14-at-17.58.59.png" alt="image-center" class="align-center" /></p>

<p>Token ma termin ważności, gdy się wyczerpie, będziemy musieli zalogować się ponownie (inne metody autoryzacji pozwalają na odświeżanie tokenu, w angular-spotify tego nie ma).</p>

<p>Następnym razem zajmiemy się stworzeniem widoku z kryteriami wyszukiwania :).</p>

<p>(*) Jeśli okienko z autoryzacją się samo nie zamyka, tylko pojawia się błąd 404 albo informacja o złym redirect_uri, to trzeba pokombinować trochę z ustawieniem adresu callbacku w konsoli dewelopera Spotify, i ustawieniami w naszej konfiguracji <code class="highlighter-rouge">SpotifyProvider</code>. Raz mi działa, kiedy podaję bezpośrednio z końcówką “.html”, a raz bez. … ;)</p>

<h2 id="part-3">PART 3</h2>

<p>W tym odcinku dodamy do naszej aplikacji formularz, zbierający kryteria wyszukiwania oraz widokiem wyświetlającym rezultaty.</p>

<h3 id="indexhtml">index.html</h3>

<p>Jako, że chcemy by Angular sam uzupełniał DOM o potrzebne elementy HTML, musimy oznaczyć miejsce, w którym ma to robić. Służy temu dyrektywa <code class="highlighter-rouge">ng-view</code>.</p>

<p>W pliku <code class="highlighter-rouge">index.html</code> pod elementem <code class="highlighter-rouge">&lt;nav&gt;&lt;/nav&gt;</code> dodajemy:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;main</span> <span class="na">ng-view</span><span class="nt">&gt;</span>
</code></pre></div></div>

<h3 id="appjs-2">app.js (2)</h3>

<p>By scedować zarządzanie przekierowaniami na stronie Angularowi musimy skonfigurować moduł AngularJS, który domyślnie nie jest ładowany: ngRoute.</p>

<p>Zmodyfikujemy w tym celu pierwszą linijkę pliku app.js, w której inicjowaliśmy naszą aplikację:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">const</span> <span class="nx">spotiBar</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"spotiBar"</span><span class="p">,</span> <span class="p">[</span>
      <span class="s2">"ngRoute"</span><span class="p">,</span>
      <span class="s2">"checklist-model"</span><span class="p">,</span>
      <span class="s2">"rzModule"</span><span class="p">,</span>
      <span class="s2">"spotify"</span>
    <span class="p">]);</span>
</code></pre></div></div>

<p>Oprócz ngRoute dodaliśmy od razu <a href="https://vitalets.github.io/checklist-model/">checklist-model</a> oraz <a href="https://github.com/angular-slider/angularjs-slider">rzModule</a>, czyli dodatkowe biblioteki, które ułatwią nam pracę z formularzami.</p>

<p>ngRoute trzeba stosownie skonfigurować, do naszej funkcji konfigurującej dodajemy:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">spotiBar</span><span class="p">.</span><span class="nx">config</span><span class="p">([</span>
      <span class="s2">"$routeProvider"</span><span class="p">,</span>
      <span class="s2">"SpotifyProvider"</span><span class="p">,</span>
      <span class="kd">function</span><span class="p">(</span><span class="nx">$routeProvider</span><span class="p">,</span> <span class="nx">SpotifyProvider</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$routeProvider</span>
          <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s2">"/"</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">redirectTo</span><span class="p">:</span> <span class="s2">"/search"</span>
          <span class="p">})</span>
          <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s2">"/search"</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">templateUrl</span><span class="p">:</span> <span class="s2">"views/search.html"</span><span class="p">,</span>
            <span class="na">controller</span><span class="p">:</span> <span class="s2">"SearchController"</span>
          <span class="p">})</span>
          <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s2">"/results"</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">templateUrl</span><span class="p">:</span> <span class="s2">"views/results.html"</span><span class="p">,</span>
            <span class="na">controller</span><span class="p">:</span> <span class="s2">"ResultsController"</span>
          <span class="p">});</span>
        <span class="c1">// Poniżej reszta z poprzednich części: SpotifyProvider.setClientId()....</span>
        <span class="c1">// A także sprawdzenie obecności tokena w localStorage: if(localStorage.getItem())....</span>
      <span class="p">}</span>
    <span class="p">]);</span>
</code></pre></div></div>

<p>Dzięki temu, kiedy użytkownik kliknie link odsyłający do, dajmy na to, <code class="highlighter-rouge">/search</code>, Angular będzie wiedział jaki fragment HTML ma dodać w miejsce naszego <code class="highlighter-rouge">ng-view</code> w <code class="highlighter-rouge">index.html</code> (będzie to fragment zlokalizowany w <code class="highlighter-rouge">views/search.html</code>) oraz jaki kontroler jest tam używany (<code class="highlighter-rouge">SearchController</code>).</p>

<p>Przypadek <code class="highlighter-rouge">.when("/", {})</code> to przypadek wejścia na stronę główną. Również wtedy Angular ma załadować to samo, co w momencie przekierowania na <code class="highlighter-rouge">/search</code>.</p>

<h3 id="searchhtml">search.html</h3>

<p>Tworzymy plik <code class="highlighter-rouge">search.html</code> w folderze <code class="highlighter-rouge">/views</code>.</p>

<p>Kod formularza wyszukiwania jest dosyć długi, gdyż jest wiele kryteriów, które użytkownik może ustawić.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">" row justify-content-center"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"btn-primary"</span> <span class="na">ng-click=</span><span class="s">"searchRecommendations()"</span><span class="nt">&gt;</span>Search recommendations<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container row"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-1"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group "</span><span class="nt">&gt;</span>
            <span class="nt">&lt;form&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">ng-click=</span><span class="s">"searchSeeds()"</span> <span class="na">class=</span><span class="s">"btn-warning"</span> <span class="na">value=</span><span class="s">"Search for seeds"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span>  <span class="na">ng-model=</span><span class="s">"seedsQuery"</span> <span class="na">placeholder=</span><span class="s">"Enter seeds query"</span><span class="nt">/&gt;</span>
              <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"spotify-font-color"</span><span class="nt">&gt;</span>Limit (1-100):
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"number"</span> <span class="na">min=</span><span class="s">"1"</span> <span class="na">max=</span><span class="s">"100"</span> <span class="na">ng-model=</span><span class="s">"limit"</span> <span class="nt">/&gt;</span>
              <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
              <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"spotify-font-color"</span><span class="nt">&gt;</span>Duration (in seconds):
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"number"</span> <span class="na">ng-model=</span><span class="s">"duration"</span> <span class="nt">/&gt;</span>
              <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
              <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"spotify-font-color"</span><span class="nt">&gt;</span>Key (0 = C, 2 = D, and so on):
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"number"</span> <span class="na">min=</span><span class="s">"0"</span> <span class="na">max=</span><span class="s">"11"</span> <span class="na">value=</span><span class="s">"0"</span> <span class="na">ng-model=</span><span class="s">"key"</span> <span class="nt">/&gt;</span>
              <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
              <span class="nt">&lt;label</span>  <span class="na">class=</span><span class="s">"spotify-font-color"</span><span class="nt">&gt;</span>Major/Minus (1/0):
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"number"</span> <span class="na">min=</span><span class="s">"0"</span> <span class="na">max=</span><span class="s">"1"</span> <span class="na">value=</span><span class="s">"0"</span> <span class="na">ng-model=</span><span class="s">"ismajor"</span> <span class="nt">/&gt;</span>
              <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
              <span class="nt">&lt;label</span>  <span class="na">class=</span><span class="s">"spotify-font-color"</span><span class="nt">&gt;</span>Tempo (BPM):
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"number"</span> <span class="na">min=</span><span class="s">"0"</span> <span class="na">max=</span><span class="s">"1000"</span> <span class="na">value=</span><span class="s">"120"</span> <span class="na">ng-model=</span><span class="s">"tempo"</span> <span class="nt">/&gt;</span>
              <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
    
              <span class="nt">&lt;div&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"spotify-font-color"</span><span class="nt">&gt;</span>Acousticness:
                  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ng-model=</span><span class="s">"sliderAcousticness"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;br/&gt;</span>
                <span class="nt">&lt;rzslider</span> <span class="na">rz-slider-model=</span><span class="s">"sliderAcousticness"</span> <span class="na">rz-slider-options=</span><span class="s">"{floor: 0, ceil: 100, step: 1, showSelectionBar: true}"</span><span class="nt">&gt;&lt;/rzslider&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;div&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"spotify-font-color"</span><span class="nt">&gt;</span>Danceability:
                  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">min=</span><span class="s">"0"</span> <span class="na">max=</span><span class="s">"100"</span> <span class="na">ng-model=</span><span class="s">"sliderDanceability"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;rzslider</span> <span class="na">rz-slider-model=</span><span class="s">"sliderDanceability"</span> <span class="na">rz-slider-options=</span><span class="s">"{floor: 0, ceil: 100, step: 1, precision: 1}"</span><span class="nt">&gt;&lt;/rzslider&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;div&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"spotify-font-color"</span><span class="nt">&gt;</span>Energy:
                  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">min=</span><span class="s">"0"</span> <span class="na">max=</span><span class="s">"100"</span> <span class="na">ng-model=</span><span class="s">"sliderEnergy"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;rzslider</span> <span class="na">rz-slider-model=</span><span class="s">"sliderEnergy"</span> <span class="na">rz-slider-options=</span><span class="s">"{floor: 0, ceil: 100, step: 1, precision: 1}"</span><span class="nt">&gt;&lt;/rzslider&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;div&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"spotify-font-color"</span><span class="nt">&gt;</span>Liveness:
                  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">min=</span><span class="s">"0"</span> <span class="na">max=</span><span class="s">"100"</span> <span class="na">ng-model=</span><span class="s">"sliderLiveness"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;rzslider</span> <span class="na">rz-slider-model=</span><span class="s">"sliderLiveness"</span> <span class="na">rz-slider-options=</span><span class="s">"{floor: 0, ceil: 100, step: 1, precision: 1}"</span><span class="nt">&gt;&lt;/rzslider&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;div&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"spotify-font-color"</span><span class="nt">&gt;</span>Instrumentalness:
                  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">min=</span><span class="s">"0"</span> <span class="na">max=</span><span class="s">"100"</span> <span class="na">ng-model=</span><span class="s">"sliderInstrumentalness"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;rzslider</span> <span class="na">rz-slider-model=</span><span class="s">"sliderInstrumentalness"</span> <span class="na">rz-slider-options=</span><span class="s">"{floor: 0, ceil: 100, step: 1, precision: 1}"</span><span class="nt">&gt;&lt;/rzslider&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;div&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"spotify-font-color"</span><span class="nt">&gt;</span>Popularity:
                  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">min=</span><span class="s">"0"</span> <span class="na">max=</span><span class="s">"100"</span> <span class="na">ng-model=</span><span class="s">"sliderPopularity"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;rzslider</span> <span class="na">rz-slider-model=</span><span class="s">"sliderPopularity"</span> <span class="na">rz-slider-options=</span><span class="s">"{floor: 0, ceil: 100, step: 1, precision: 1}"</span><span class="nt">&gt;&lt;/rzslider&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;div&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"spotify-font-color"</span><span class="nt">&gt;</span>Speechiness:
                  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">min=</span><span class="s">"0"</span> <span class="na">max=</span><span class="s">"100"</span> <span class="na">ng-model=</span><span class="s">"sliderSpeechiness"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;rzslider</span> <span class="na">rz-slider-model=</span><span class="s">"sliderSpeechiness"</span> <span class="na">rz-slider-options=</span><span class="s">"{floor: 0, ceil: 100, step: 1, precision: 1}"</span><span class="nt">&gt;&lt;/rzslider&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;div&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"spotify-font-color"</span><span class="nt">&gt;</span>Valence:
                  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">min=</span><span class="s">"0"</span> <span class="na">max=</span><span class="s">"100"</span> <span class="na">ng-model=</span><span class="s">"sliderValence"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;rzslider</span> <span class="na">rz-slider-model=</span><span class="s">"sliderValence"</span> <span class="na">rz-slider-options=</span><span class="s">"{floor: 0, ceil: 100, step: 1, precision: 1}"</span><span class="nt">&gt;&lt;/rzslider&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/form&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-7"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"spotify-font-color"</span><span class="nt">&gt;</span>Artists:<span class="nt">&lt;/p&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span> <span class="na">ng-repeat=</span><span class="s">"artist in seedsArtists"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">checklist-model=</span><span class="s">"seedsSelection.artists"</span> <span class="na">checklist-value=</span><span class="s">"artist.id"</span> <span class="nt">/&gt;</span> 
                <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"spotify-font-color"</span><span class="nt">&gt;&lt;/span&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"spotify-font-color"</span><span class="nt">&gt;</span>Tracks:<span class="nt">&lt;/p&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span> <span class="na">ng-repeat=</span><span class="s">"track in seedsTracks"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">checklist-model=</span><span class="s">"seedsSelection.tracks"</span> <span class="na">checklist-value=</span><span class="s">"track.id"</span> <span class="nt">/&gt;</span> 
                <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"spotify-font-color"</span><span class="nt">&gt;</span> -<span class="nt">&lt;/span&gt;</span>
                <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"spotify-font-color"</span> <span class="na">ng-repeat=</span><span class="s">"artist in track.artists"</span><span class="nt">&gt;</span> <span class="ni">&amp;nbsp;</span> <span class="nt">&lt;/span&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-2"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"spotify-font-color"</span><span class="nt">&gt;</span>Genres:<span class="nt">&lt;/p&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span> <span class="na">ng-repeat=</span><span class="s">"genre in seedsGenres"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">checklist-model=</span><span class="s">"seedsSelection.genres"</span> <span class="na">checklist-value=</span><span class="s">"genre"</span> <span class="nt">/&gt;</span> 
                <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"spotify-font-color"</span><span class="nt">&gt;&lt;/span&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>Za rozpoczęcie wyszukiwania na bazie ustalonych w formularzu przez użytkownika kryteriów odpowiada obecny w 2 linijce kodu element <code class="highlighter-rouge">&lt;button&gt;</code>, z atrybutem <code class="highlighter-rouge">ng-click="searchRecommendations()"</code>, odwołującym się do funkcji w kontrolerze <code class="highlighter-rouge">SearchController</code>, którą zaraz napiszemy.</p>

<p>Analogicznie, w linijce 9, mamy <code class="highlighter-rouge">input</code> z<code class="highlighter-rouge"> ng-click="searchSeeds()"</code>. Jednym z kryteriów wyszukiwania rekomendacji w Spotify są artyści, utwory i gatunku muzyczne. Funkcja <code class="highlighter-rouge">searchSeeds</code> posłuży nam do wygenerowania z nimi listy na podstawie hasła wpisanego przez użytkownika.</p>

<p>Wszystkie <code class="highlighter-rouge">ng-model</code> informują Angular, pod jaką nazwą ma trzymać dane zebrane w danym polu formularza. Wszystkie dane zebrane z poziomu HTML są w AngularJS trzymane w obiekcie <code class="highlighter-rouge">$scope</code>, do którego będziemy się odwoływać implementując nasz kontroler.</p>

<p><code class="highlighter-rouge">rz-slider-model</code>, <code class="highlighter-rouge">checklist-model</code>,  - te atrybuty definiują, analogicznie do <code class="highlighter-rouge">ng-model,</code> pod jaką nazwą właściwości <code class="highlighter-rouge">$scope</code> Angular ma trzymać dane ze sliderów i checkboxów (i pochodzą z wcześniej przez nas dodanych do naszej aplikacji bibliotek).</p>

<p><code class="highlighter-rouge">rz-slider-options</code> definiuje dodatkowo ustawienia slidera. W kodzie ustawiony jest zakres wartości oraz stopień minimalnej zmiany wartości.</p>

<p><code class="highlighter-rouge">ng-repeat</code> to dyrektywa pozwalająca nam na dynamiczne tworzenie iteracji danych elementów HTML, czyli po prostu w pętli. Przykładowo w linijce 93, jeśli w <code class="highlighter-rouge">seedsArtist</code> jest 100 artystów, to cały element <code class="highlighter-rouge">&lt;div&gt;</code> (wraz z wewnętrzną strukturą) będzie wygenerowany 100 razy.</p>

<p><code class="highlighter-rouge">checklist-value</code> ustanawia wartość checkboxa, czyli jak użytkownik zaznaczy dany checkbox, to ten atrybut mówi naszej aplikacji, co ma trzymać w pamięci.</p>

<p>Z kolei zapis taki, jak w linijce 95: ``, podwójne klamry, to składnia Angulara, wiążąca dane ukryte pod <code class="highlighter-rouge">artist.name</code> (siedzące naturalnie w obiekcie <code class="highlighter-rouge">$scope</code>) tak, że na naszej stronie widzimy, w tym wypadku, imię danego wykonawcy, a nie dosłowny string “”.</p>

<h3 id="appjs-searchcontroller">app.js SearchController</h3>

<p>Powracając do pliku app.js, zaczynamy pisać kod kontrolera:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">spotiBar</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s2">"SearchController"</span><span class="p">,</span> <span class="p">[</span>
      <span class="s2">"$scope"</span><span class="p">,</span>
      <span class="s2">"Spotify"</span><span class="p">,</span>
      <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">Spotify</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Tutaj będą funkcje kontrolera</span>
      <span class="p">}</span>
    <span class="p">]);</span>
</code></pre></div></div>

<p>Jak widzimy, będziemy się odwoływać do obiektu $scope, pozwalającemu nam pobrać ustawione przez użytkownika kryteria, a w dalszym planie także wyświetlić użytkownikowi wyniki. Pierwsza funkcja, którą napiszemy, to obecna w search.html i przywołana już funkcja searchSeeds.</p>

<p>W obrębie naszego kontrolera:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">let</span> <span class="nx">seedsSelection</span> <span class="o">=</span> <span class="p">{};</span>
    
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">searchSeeds</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span> <span class="o">=</span> <span class="nx">seedsSelection</span><span class="p">;</span>
      <span class="nx">Spotify</span><span class="p">.</span><span class="nx">getAvailableGenreSeeds</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsGenres</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">genres</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">alert</span><span class="p">(</span><span class="s2">"The access token expired. Please login again."</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">);</span>
      <span class="nx">Spotify</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsQuery</span><span class="p">,</span> <span class="s2">"artist"</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsArtists</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">artists</span><span class="p">.</span><span class="nx">items</span><span class="p">;</span>
      <span class="p">});</span>
      <span class="nx">Spotify</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsQuery</span><span class="p">,</span> <span class="s2">"track"</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsTracks</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">tracks</span><span class="p">.</span><span class="nx">items</span><span class="p">;</span>
      <span class="p">});</span>
    <span class="p">};</span>
</code></pre></div></div>

<p>Tworzymy obiekt seedsSelection, będziemy w nim przetrzymywać wybrane przez użytkownika nazwy artystów/utworów/gatunków muzycznych. Wiążemy go z obecnym w $scope seedsSelection.</p>

<p>Spotify API posiada szereg rodzajów zapytań do bazy. Jednym z nich jest żądanie zwrócenia listy dostępnych gatunków muzycznych. Do tej metody odwołujemy się w linijce 5. Jeśli zakończy się ona sukcesem, to zwrócona zostanie lista gatunków w formacie JSON w obiekcie <code class="highlighter-rouge">data</code>. Przypisujemy te dane do <code class="highlighter-rouge">$scope.seedsGenres</code>, a kod w <code class="highlighter-rouge">search.html</code> w linijkach 108-111 wyświetli je użytkownikowi. Dodatkowo kontrolujemy ewentualne wystąpienie błędu połączenia, będzie to oznaczać, że token uzyskany przez użytkownika w trakcie autoryzacji przestał być ważny i trzeba się zalogować na nowo. Analogicznie z zapytaniami o artystów i utwory, ale tutaj już tego sprawdzenia błędu nie obsługujemy, jako że wszystkie metody są wykonywane mniej więcej w tym samym czasie.</p>

<p>Następną funkcję, dokonanie właściwego wyszukania rekomendacji, podzielimy na szereg funkcji:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">$scope</span><span class="p">.</span><span class="nx">searchRecommendations</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">checkIfSeedsInLimit</span><span class="p">())</span> <span class="p">{</span>
           <span class="nx">Spotify</span><span class="p">.</span><span class="nx">getRecommendations</span><span class="p">(</span><span class="nx">prepCriteria</span><span class="p">()).</span><span class="nx">then</span><span class="p">(</span>
             <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
               <span class="c1">//Zrób coś z wynikami wyszukania, np. wypisz je w konsoli przeglądarki.</span>
               <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
               <span class="c1">// Przekieruj okno przeglądarki pod widok z wynikami.</span>
               <span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s2">"/#!/results"</span><span class="p">;</span>
             <span class="p">},</span>
             <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
               <span class="nx">alert</span><span class="p">(</span><span class="s2">"The access token expired. Please login again."</span><span class="p">);</span>
             <span class="p">}</span>
           <span class="p">);</span>
         <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="s2">"You can select up to 5 different seeds."</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">};</span>
    
       <span class="nx">checkIfSeedsInLimit</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span>
           <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span> <span class="o">==</span> <span class="kc">undefined</span> <span class="o">||</span>
           <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">artists</span> <span class="o">==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span>
             <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">tracks</span> <span class="o">==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span>
             <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">genres</span> <span class="o">==</span> <span class="kc">undefined</span><span class="p">)</span>
         <span class="p">)</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="s2">"You did not define any seeds"</span><span class="p">);</span>
           <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
         <span class="p">}</span>
    
         <span class="kd">let</span> <span class="nx">numberOfSeeds</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
         <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">artists</span> <span class="o">==</span> <span class="kc">undefined</span><span class="p">))</span> <span class="p">{</span>
           <span class="nx">numberOfSeeds</span> <span class="o">=</span>
             <span class="nx">numberOfSeeds</span> <span class="o">+</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">artists</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">genres</span> <span class="o">==</span> <span class="kc">undefined</span><span class="p">))</span> <span class="p">{</span>
           <span class="nx">numberOfSeeds</span> <span class="o">=</span>
             <span class="nx">numberOfSeeds</span> <span class="o">+</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">genres</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">tracks</span> <span class="o">==</span> <span class="kc">undefined</span><span class="p">))</span> <span class="p">{</span>
           <span class="nx">numberOfSeeds</span> <span class="o">=</span>
             <span class="nx">numberOfSeeds</span> <span class="o">+</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">tracks</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;</span> <span class="nx">numberOfSeeds</span> <span class="o">&amp;&amp;</span> <span class="mi">5</span> <span class="o">&gt;=</span> <span class="nx">numberOfSeeds</span><span class="p">)</span> <span class="p">{</span>
           <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
         <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
           <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
         <span class="p">}</span>
       <span class="p">};</span>
    
       <span class="nx">prepCriteria</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
         <span class="kd">let</span> <span class="nx">criteria</span> <span class="o">=</span> <span class="p">{};</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">artists</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">criteria</span><span class="p">.</span><span class="nx">seed_artists</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">artists</span><span class="p">.</span><span class="nx">join</span><span class="p">();</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">tracks</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">criteria</span><span class="p">.</span><span class="nx">seed_tracks</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">tracks</span><span class="p">.</span><span class="nx">join</span><span class="p">();</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">genres</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">criteria</span><span class="p">.</span><span class="nx">seed_genres</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">genres</span><span class="p">.</span><span class="nx">join</span><span class="p">();</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">limit</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">criteria</span><span class="p">.</span><span class="nx">limit</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">limit</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">duration</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_duration_ms</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">duration</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">key</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_key</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">key</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">ismajor</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_mode</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">ismajor</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">tempo</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_tempo</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">tempo</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">sliderAcousticness</span><span class="p">))</span> <span class="p">{</span>
           <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_acousticness</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">sliderAcousticness</span> <span class="o">/</span> <span class="mi">100</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">sliderDanceability</span><span class="p">))</span> <span class="p">{</span>
           <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_danceability</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">sliderDanceability</span> <span class="o">/</span> <span class="mi">100</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">sliderEnergy</span><span class="p">))</span> <span class="p">{</span>
           <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_energy</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">sliderEnergy</span> <span class="o">/</span> <span class="mi">100</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">sliderInstrumentalness</span><span class="p">))</span> <span class="p">{</span>
           <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_instrumentalness</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">sliderInstrumentalness</span> <span class="o">/</span> <span class="mi">100</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">sliderLiveness</span><span class="p">))</span> <span class="p">{</span>
           <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_liveness</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">sliderLiveness</span> <span class="o">/</span> <span class="mi">100</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">sliderPopularity</span><span class="p">))</span> <span class="p">{</span>
           <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_popularity</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">sliderPopularity</span> <span class="o">/</span> <span class="mi">100</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">sliderSpeechiness</span><span class="p">))</span> <span class="p">{</span>
           <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_speechiness</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">sliderSpeechiness</span> <span class="o">/</span> <span class="mi">100</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">sliderValence</span><span class="p">))</span> <span class="p">{</span>
           <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_valence</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">sliderValence</span> <span class="o">/</span> <span class="mi">100</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">return</span> <span class="nx">criteria</span><span class="p">;</span>
       <span class="p">};</span>
</code></pre></div></div>

<p>Funkcja <code class="highlighter-rouge">searchRecommendations</code> rozpoczyna się od sprawdzenia poprawności wybranych przez użytkownika seedów (czyli utworów, artystów i gatunków): funkcja <code class="highlighter-rouge">checkIfSeedsInLimit</code>. Według ograniczeń Spotify API użytkownik musi wybrać ich w przedziale 1-5 (zawsze musi wybrać coś, ale nie więcej niż 5 łącznie). Jeżeli będzie ich za dużo albo nie będzie ich w ogóle, użytkownikowi wyświetli się mały alert, okienko z informacją.</p>

<p>Po przejściu przez warunek wysyłamy zapytanie przez API, gdzie obiekt z naszymi kryteriami jest przygotowywany w funkcji <code class="highlighter-rouge">prepCriteria</code>. Różne warunki (<code class="highlighter-rouge">null</code>, <code class="highlighter-rouge">undefined</code> lub <code class="highlighter-rouge">NaN</code>) wynikają z tego, jak dane pole w formularzu jest widziane przez JS w momencie, kiedy jest puste. Wartości ze sliderów dzielimy przez 100, bo API akceptuje w wypadku tych kryteriów zakres 0.00-1.00, a nie 0-100.</p>

<p>W linijce 5 mamy sytuację, w której otrzymaliśmy wyniki ze Spotify w obiekcie <code class="highlighter-rouge">data</code>. Należałoby z nimi coś zrobić, ale że wyświetlamy wyniki w osobnym widoku (pod przekierowaniem <code class="highlighter-rouge">/results</code>), do którego przyporządkowaliśmy w konfiguracji <code class="highlighter-rouge">ngRoute</code> kontroler <code class="highlighter-rouge">ResultsController</code>, to musimy jakoś skomunikować się między kontrolerami.</p>

<h3 id="resultscontroller-i-sharingresultsservice">ResultsController i SharingResultsService</h3>

<p>W AngularJS do tego celu służą Service (serwisy/usługi? <a href="https://www.p-programowanie.pl/angularjs/service-factory-provider-odchudzenie-kontrolera/">Tutaj</a> o nich więcej). Pozwalają one na komunikację pomiędzy kontrolerami. Na nasze potrzeby wystarczy bardzo prosta implementacja:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">// Service</span>
    <span class="nx">spotiBar</span><span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s2">"SharingResultsService"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">sharingRecommendationResults</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">{}</span>
      <span class="p">};</span>
      <span class="k">return</span> <span class="nx">sharingRecommendationResults</span><span class="p">;</span>
    <span class="p">});</span>
</code></pre></div></div>

<p>Kontrolery, które będą korzystać z <code class="highlighter-rouge">SharingResultsService</code> będą miały do dyspozycji obiekt <code class="highlighter-rouge">sharingRecommendationResults</code>. Na poziomie <code class="highlighter-rouge">SearchControllera</code> zapiszemy do tego obiektu wyniki wyszukiwania, zaś na poziomie <code class="highlighter-rouge">ResultsController</code> się do tych wyników odwołamy. Musimy zmodyfikować nieco nasz <code class="highlighter-rouge">SearchController</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">spotiBar</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s2">"SearchController"</span><span class="p">,</span> <span class="p">[</span>
      <span class="s2">"$scope"</span><span class="p">,</span>
      <span class="s2">"Spotify"</span><span class="p">,</span>
      <span class="s2">"SharingResultsService"</span><span class="p">,</span>
      <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">Spotify</span><span class="p">,</span> <span class="nx">SharingResultsService</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// $scope.searchSeeds = function() ....</span>
    
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">searchRecommendations</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">checkIfSeedsInLimit</span><span class="p">())</span> <span class="p">{</span>
            <span class="nx">Spotify</span><span class="p">.</span><span class="nx">getRecommendations</span><span class="p">(</span><span class="nx">prepCriteria</span><span class="p">()).</span><span class="nx">then</span><span class="p">(</span>
              <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">SharingResultsService</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
                <span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s2">"/#!/results"</span><span class="p">;</span>
              <span class="p">},</span>
              <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">alert</span><span class="p">(</span><span class="s2">"The access token expired. Please login again."</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">alert</span><span class="p">(</span><span class="s2">"You can select up to 5 different seeds."</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">};</span>
        <span class="c1">// reszta kodu kontrolera</span>
    <span class="p">}]);</span>
</code></pre></div></div>

<p>Względem poprzedniej wersji dodaliśmy <code class="highlighter-rouge">SharingResultsService</code> jako zależność oraz zapisaliśmy (linijka 12) wyniki.</p>

<p><code class="highlighter-rouge">ResultsController</code> będzie bardzo krótki. W obiekcie data nasze wyniki są pod tracks:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">spotiBar</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s2">"ResultsController"</span><span class="p">,</span> <span class="p">[</span>
      <span class="s2">"$scope"</span><span class="p">,</span>
      <span class="s2">"SharingResultsService"</span><span class="p">,</span>
      <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">SharingResultsService</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">recommendedTracks</span> <span class="o">=</span> <span class="nx">SharingResultsService</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">tracks</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">]);</span>
</code></pre></div></div>

<p>W naszym widoku wyników musimy ustawić odwołanie jako <code class="highlighter-rouge">recommendedTracks</code>.</p>

<h3 id="resultshtml">Results.html</h3>

<p>Jako że jeszcze go nie stworzyliśmy, to zrobimy to teraz. Tworzymy plik <code class="highlighter-rouge">results.html</code> w folderze <code class="highlighter-rouge">/views</code>:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"spotify-font-artist-name"</span><span class="nt">&gt;</span>Results:<span class="nt">&lt;/h1&gt;</span>
    
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"justify-content-center row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-lg-2 col-md-3 col-sm-6 col-xs-12 text-center"</span> <span class="na">ng-repeat=</span><span class="s">"track in recommendedTracks"</span> <span class="na">style=</span><span class="s">"padding-left: 5px;padding-right: 5px;"</span><span class="nt">&gt;</span>
    
                <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">""</span><span class="nt">&gt;&lt;img</span> <span class="na">ng-src=</span><span class="s">""</span> <span class="na">alt=</span><span class="s">""</span> <span class="na">style=</span><span class="s">"width:170px;height:170px;"</span><span class="nt">&gt;&lt;/a&gt;</span>
                <span class="nt">&lt;br/&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"text-center"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;p</span> <span class="na">style=</span><span class="s">"margin-bottom: 0px;margin-top: 5px;"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"spotify-font-artist-name"</span> <span class="na">ng-repeat=</span><span class="s">"artist in track.artists"</span> <span class="na">href=</span><span class="s">""</span><span class="nt">&gt;</span> <span class="nt">&lt;/a&gt;</span>
                    <span class="nt">&lt;/p&gt;</span>
                    <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"text-warning"</span> <span class="na">style=</span><span class="s">"margin-bottom: 0px;"</span><span class="nt">&gt;&lt;a</span> <span class="na">class=</span><span class="s">"text-warning"</span> <span class="na">href=</span><span class="s">""</span><span class="nt">&gt;&lt;/a&gt;&lt;/p&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
    
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>Pomijając klasy Bootstrapowe (sprawiające, że nasze wyniki będą wyświetlane w kilku responsywnych kolumnach), ustawiliśmy <code class="highlighter-rouge">ng-repeat</code> na iteracje utworów w <code class="highlighter-rouge">recommendedTracks</code>. Wyświetlana jest okładka albumu, nazwa utworu i wykonawcy.</p>

<p>I to tyle!</p>

<p>Po zapisaniu i odpaleniu na serwerze lokalnym powinniśmy widzieć coś takiego:</p>

<p>Strona z kryteriami wyszukiwania:</p>

<p><img src="/assets/images/oldblog/Screen-Shot-2018-04-20-at-21.56.05-1.png" alt="image-center" class="align-center" /></p>

<p>Strona z wynikami:</p>

<p><img src="/assets/images/oldblog/Screen-Shot-2018-04-20-at-21.56.16.png" alt="image-center" class="align-center" /></p>

<p>I już! W następnej części poprawimy estetykę naszej aplikacji i dodamy instrukcję obsługi (mogliśmy od niej zacząć, właśnie sobie uświadomiłem, że użytkownik nie musi wiedzieć na czym polega wyszukiwanie rekomendacji w Spotify API ;)).</p>

<h2 id="part-4">PART 4</h2>

<p>W tym odcinku poprawimy nieco estetykę naszej aplikacji, dodamy instrukcję i ułatwimy UI.</p>

<h3 id="estetyka">Estetyka</h3>

<p>Skorzystamy z darmowej wersji <a href="https://designrevision.com/demo/shards/">Shards</a>, upiększającej nieco domyślnego Bootstrapa.</p>

<p>Tak było:</p>

<p><img src="/assets/images/oldblog/SpotiBar01.png" alt="image-center" class="align-center" /></p>

<p>A tak będzie:</p>

<p><img src="/assets/images/oldblog/SpotiBar02.png" alt="image-center" class="align-center" /></p>

<p>W samym wpisie wymienimy tylko najważniejsze zmiany, małe zmiany CSSowe pominę. Wszystko i tak jest na GitHub w nowszej wersji. Jest to bardziej wpis sprawozdawczy, niż poradnikowy. Zawsze można prześledzić historię repozytorium ;-).</p>

<h4 id="searchhtml-1">Search.html</h4>

<p>Zrezygnujemy z paczki rz-slider, na rzecz… niczego :). Slidery są mało wygodne, było ich za dużo i odciągały uwagę. Wyniki wyszukiwania z API też nie powalają precyzją, jeśli chodzi o kryteria, do których były suwaki… Zamiast tego są elementy select z kilkoma predefiniowanymi wartościami.</p>

<p>Prawą połowę ekranu wyszukiwania zajmie instrukcja, która będzie wyświetlana tak długo, jak długo użytkownik nie wyszuka seedów. Odpowiadają za to dyrektywy ng-switch i ng-switch-when.</p>

<p>Pełen kod dla search.html znajduje się poniżej:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container row mt-5 ml-5"</span><span class="nt">&gt;</span>
    
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-6"</span><span class="nt">&gt;</span>
    
        <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"col-form-label-lg"</span><span class="nt">&gt;</span>1. Choose up to five tracks/genres/artists: <span class="nt">&lt;/label&gt;</span>
    
        <span class="nt">&lt;form</span> <span class="na">class=</span><span class="s">"form-inline"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group input-group-lg mx-sm-3 mb-2"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group-prepend"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"input-group-text"</span><span class="nt">&gt;</span>Seeds<span class="nt">&lt;/span&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"form-seeds"</span> <span class="na">placeholder=</span><span class="s">"Type in seeds query"</span> <span class="na">ng-model=</span><span class="s">"seedsQuery"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group-append"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"btn btn-outline-secondary"</span> <span class="na">ng-click=</span><span class="s">"searchSeeds()"</span><span class="nt">&gt;</span>Find seeds<span class="nt">&lt;/button&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
    
        <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"col-form-label-lg mr-5"</span><span class="nt">&gt;</span>2. Search!<span class="nt">&lt;/label&gt;</span>
    
        <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"btn btn-success btn-lg btn-block"</span> <span class="na">ng-click=</span><span class="s">"searchRecommendations()"</span><span class="nt">&gt;</span>Find tracks<span class="nt">&lt;/button&gt;</span>
    
        <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"col-form-label-lg"</span><span class="nt">&gt;</span>* Optional criteria<span class="nt">&lt;/label&gt;</span>
    
        <span class="nt">&lt;form&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group col-md-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"inputDuration"</span> <span class="na">class=</span><span class="s">"col-form-label-sm"</span><span class="nt">&gt;</span>Duration: <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"inputDuration"</span> <span class="na">type=</span><span class="s">"number"</span> <span class="na">class=</span><span class="s">"form-control input-group-sm"</span> <span class="na">ng-model=</span><span class="s">"durationInput"</span> <span class="na">placeholder=</span><span class="s">"Duration in ms (&gt;0)"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group col-md-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"inputLimit"</span> <span class="na">class=</span><span class="s">"col-form-label-sm"</span><span class="nt">&gt;</span>Limit: <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"inputLimit"</span> <span class="na">type=</span><span class="s">"number"</span> <span class="na">class=</span><span class="s">"form-control input-group-sm"</span> <span class="na">ng-model=</span><span class="s">"limitInput"</span> <span class="na">placeholder=</span><span class="s">"1-100 results"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
    
        <span class="nt">&lt;form&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-row mb-3"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group col-md-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"inputTempo"</span> <span class="na">class=</span><span class="s">"col-form-label-sm"</span><span class="nt">&gt;</span>Tempo (BPM): <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"inputTempo"</span> <span class="na">type=</span><span class="s">"number"</span> <span class="na">class=</span><span class="s">"form-control input-group-sm"</span> <span class="na">ng-model=</span><span class="s">"tempoInput"</span> <span class="na">placeholder=</span><span class="s">"Beats per minute (&gt;0)"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group col-md-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"inputKey"</span> <span class="na">class=</span><span class="s">"col-form-label-sm"</span><span class="nt">&gt;</span>Key: <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"inputKey"</span> <span class="na">type=</span><span class="s">"number"</span> <span class="na">class=</span><span class="s">"form-control input-group-sm"</span> <span class="na">ng-model=</span><span class="s">"keyInput"</span> <span class="na">placeholder=</span><span class="s">"0 - C, 1 - C#, up to 11"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
    
        <span class="nt">&lt;form&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"inputMajor"</span> <span class="na">class=</span><span class="s">"col-sm-5 col-form-label"</span><span class="nt">&gt;</span>Major/Minor: <span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-7"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"inputMajor"</span> <span class="na">class=</span><span class="s">"custom-select"</span> <span class="na">ng-model=</span><span class="s">"isMajorSelect"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select....<span class="nt">&lt;/option&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>Major<span class="nt">&lt;/option&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"0"</span><span class="nt">&gt;</span>Minor<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;/select&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
    
        <span class="nt">&lt;form&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"inputAcoustic"</span> <span class="na">class=</span><span class="s">"col-sm-5 col-form-label"</span><span class="nt">&gt;</span>Acousticness: <span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-7"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"inputAcoustic"</span> <span class="na">class=</span><span class="s">"custom-select"</span> <span class="na">ng-model=</span><span class="s">"acousticnessSelect"</span> <span class="na">ng-options=</span><span class="s">"x.level for x in criteriaOptions"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select...<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;/select&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
    
        <span class="nt">&lt;/form&gt;</span>
    
        <span class="nt">&lt;form&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"inputDanceability"</span> <span class="na">class=</span><span class="s">"col-sm-5 col-form-label"</span><span class="nt">&gt;</span>Danceability: <span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-7"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"inputDanceability"</span> <span class="na">class=</span><span class="s">"custom-select"</span> <span class="na">ng-model=</span><span class="s">"danceabilitySelect"</span> <span class="na">ng-options=</span><span class="s">"x.level for x in criteriaOptions"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select...<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;/select&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
    
        <span class="nt">&lt;form&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"inputEnergy"</span> <span class="na">class=</span><span class="s">"col-sm-5 col-form-label"</span><span class="nt">&gt;</span>Energy: <span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-7"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"inputEnergy"</span> <span class="na">class=</span><span class="s">"custom-select"</span> <span class="na">ng-model=</span><span class="s">"energySelect"</span> <span class="na">ng-options=</span><span class="s">"x.level for x in criteriaOptions"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select...<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;/select&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
    
        <span class="nt">&lt;form&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"inputLiveness"</span> <span class="na">class=</span><span class="s">"col-sm-5 col-form-label"</span><span class="nt">&gt;</span>Liveness: <span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-7"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"inputLiveness"</span> <span class="na">class=</span><span class="s">"custom-select"</span> <span class="na">ng-model=</span><span class="s">"livenessSelect"</span> <span class="na">ng-options=</span><span class="s">"x.level for x in criteriaOptions"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select...<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;/select&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
    
        <span class="nt">&lt;form&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"inputInstrument"</span> <span class="na">class=</span><span class="s">"col-sm-5 col-form-label"</span><span class="nt">&gt;</span>Instrumentalness: <span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-7"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"inputInstrument"</span> <span class="na">class=</span><span class="s">"custom-select"</span> <span class="na">ng-model=</span><span class="s">"instrumentalnessSelect"</span> <span class="na">ng-options=</span><span class="s">"x.level for x in criteriaOptions"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select...<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;/select&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
    
        <span class="nt">&lt;form&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"inputPopularity"</span> <span class="na">class=</span><span class="s">"col-sm-5 col-form-label"</span><span class="nt">&gt;</span>Popularity: <span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-7"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"inputPopularity"</span> <span class="na">class=</span><span class="s">"custom-select"</span> <span class="na">ng-model=</span><span class="s">"popularitySelect"</span> <span class="na">ng-options=</span><span class="s">"x.level for x in criteriaOptions"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select...<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;/select&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
    
        <span class="nt">&lt;form&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"inputSpeechiness"</span> <span class="na">class=</span><span class="s">"col-sm-5 col-form-label"</span><span class="nt">&gt;</span>Speechiness: <span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-7"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"inputSpeechiness"</span> <span class="na">class=</span><span class="s">"custom-select"</span> <span class="na">ng-model=</span><span class="s">"speechinessSelect"</span> <span class="na">ng-options=</span><span class="s">"x.level for x in criteriaOptions"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select...<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;/select&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
    
        <span class="nt">&lt;form&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"inputValence"</span> <span class="na">class=</span><span class="s">"col-sm-5 col-form-label"</span><span class="nt">&gt;</span>Valence: <span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-7"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"inputValence"</span> <span class="na">class=</span><span class="s">"custom-select"</span> <span class="na">ng-model=</span><span class="s">"valenceSelect"</span> <span class="na">ng-options=</span><span class="s">"x.level for x in criteriaOptions"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select...<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;/select&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
    
      <span class="nt">&lt;/div&gt;</span>
    
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-6"</span> <span class="na">ng-switch=</span><span class="s">"seedOrInstruction"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">ng-switch-when=</span><span class="s">"seeds"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"col-form-label-lg"</span><span class="nt">&gt;</span>Artists:<span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span> <span class="na">ng-repeat=</span><span class="s">"artist in seedsArtists"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label&gt;</span>
                  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">checklist-model=</span><span class="s">"seedsSelection.artists"</span> <span class="na">checklist-value=</span><span class="s">"artist.id"</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;span&gt;&lt;/span&gt;</span>
                <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-8"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"col-form-label-lg"</span><span class="nt">&gt;</span>Tracks:<span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span> <span class="na">ng-repeat=</span><span class="s">"track in seedsTracks"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label&gt;</span>
                  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">checklist-model=</span><span class="s">"seedsSelection.tracks"</span> <span class="na">checklist-value=</span><span class="s">"track.id"</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;span&gt;</span> -<span class="nt">&lt;/span&gt;</span>
                  <span class="nt">&lt;span</span> <span class="na">ng-repeat=</span><span class="s">"artist in track.artists"</span><span class="nt">&gt;</span> <span class="ni">&amp;nbsp;</span> <span class="nt">&lt;/span&gt;</span>
                <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"col-form-label-lg"</span><span class="nt">&gt;</span>Genres:<span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;br&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-check-inline"</span> <span class="na">ng-repeat=</span><span class="s">"genre in seedsGenres"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label&gt;</span>
                  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">class=</span><span class="s">""</span> <span class="na">checklist-model=</span><span class="s">"seedsSelection.genres"</span> <span class="na">checklist-value=</span><span class="s">"genre"</span> <span class="nt">/&gt;</span> 
                <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
    
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">ng-switch-when=</span><span class="s">"instruction"</span><span class="nt">&gt;</span>
      
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"jumbotron  jumbotron-fluid"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;h4</span> <span class="na">class=</span><span class="s">"display-4"</span><span class="nt">&gt;</span>How to<span class="nt">&lt;/h2&gt;</span>
              <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"lead"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"font-weight-bold"</span><span class="nt">&gt;</span>SpotiBar<span class="nt">&lt;/span&gt;</span> allows you to search Spotify recommendations based on several criteria. In order to use it, you
                should make sure that:<span class="nt">&lt;/p&gt;</span>
                <span class="nt">&lt;ol</span> <span class="na">class=</span><span class="s">"list-group mb-4"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"list-group-item"</span><span class="nt">&gt;</span>You are signed in to your Spotify account. To do so, click the button in the top-right corner<span class="nt">&lt;/li&gt;</span>
                  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"list-group-item"</span><span class="nt">&gt;</span>You've selected
                    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"font-weight-bold"</span><span class="nt">&gt;</span>at least 1 and not more than 5<span class="nt">&lt;/span&gt;</span> seeds (artists/tracks/genres). You can search for them by quering
                    field on the left<span class="nt">&lt;/li&gt;</span>
                  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"list-group-item"</span><span class="nt">&gt;</span>(optional) You can also set optional criteria, such as Duration, Key and others to get more specific recommendations<span class="nt">&lt;/li&gt;</span>
                <span class="nt">&lt;/ol&gt;</span>
                <span class="nt">&lt;hr</span> <span class="na">class=</span><span class="s">"my-4"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"lead"</span><span class="nt">&gt;</span>Some optional criteria have ranges given in placeholders. Search mechanisms will ignore such criteria that are not within range.
              <span class="nt">&lt;/p&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<h4 id="appjs-3">app.js (3)</h4>

<p>Jako że zrezygnowaliśmy z rz-slider, to paczka musi zniknąć również w naszej deklaracji modułu:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">const</span> <span class="nx">spotiBar</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"spotiBar"</span><span class="p">,</span> <span class="p">[</span>
      <span class="s2">"ngRoute"</span><span class="p">,</span>
      <span class="s2">"checklist-model"</span><span class="p">,</span>
      <span class="s2">"spotify"</span><span class="p">,</span>
    <span class="p">]);</span>
</code></pre></div></div>

<p>Oprócz tego zmienia się również nasz SearchController, tak aby uwzględnić rezygnację ze sliderów. Definiujemy między innymi criteriaOptions, do których są odwołania w search.html w elementach select. Mamy też inną formę walidacji kryteriów (nadal strasznie leniwą):</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">spotiBar</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s2">"SearchController"</span><span class="p">,</span> <span class="p">[</span>
      <span class="s2">"$scope"</span><span class="p">,</span>
      <span class="s2">"Spotify"</span><span class="p">,</span>
      <span class="s2">"SharingResultsService"</span><span class="p">,</span>
      <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">Spotify</span><span class="p">,</span> <span class="nx">SharingResultsService</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">seedsSelection</span> <span class="o">=</span> <span class="p">{};</span>
    
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedOrInstruction</span> <span class="o">=</span> <span class="s2">"instruction"</span><span class="p">;</span>
    
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">criteriaOptions</span> <span class="o">=</span> <span class="p">[</span>
          <span class="p">{</span> <span class="na">level</span><span class="p">:</span> <span class="s2">"Very low"</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="s2">"0.00"</span> <span class="p">},</span>
          <span class="p">{</span> <span class="na">level</span><span class="p">:</span> <span class="s2">"Low"</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="s2">"0.25"</span> <span class="p">},</span>
          <span class="p">{</span> <span class="na">level</span><span class="p">:</span> <span class="s2">"Medium"</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="s2">"0.50"</span> <span class="p">},</span>
          <span class="p">{</span> <span class="na">level</span><span class="p">:</span> <span class="s2">"High"</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="s2">"0.75"</span> <span class="p">},</span>
          <span class="p">{</span> <span class="na">level</span><span class="p">:</span> <span class="s2">"Very high"</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="s2">"1.00"</span> <span class="p">}</span>
        <span class="p">];</span>
    
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">searchSeeds</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span> <span class="o">=</span> <span class="nx">seedsSelection</span><span class="p">;</span>
          <span class="nx">Spotify</span><span class="p">.</span><span class="nx">getAvailableGenreSeeds</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span>
            <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedOrInstruction</span> <span class="o">=</span> <span class="s2">"seeds"</span><span class="p">;</span>
              <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsGenres</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">genres</span><span class="p">;</span>
            <span class="p">},</span>
            <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">alert</span><span class="p">(</span><span class="s2">"The access token expired. Please login again."</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">);</span>
          <span class="nx">Spotify</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsQuery</span><span class="p">,</span> <span class="s2">"artist"</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsArtists</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">artists</span><span class="p">.</span><span class="nx">items</span><span class="p">;</span>
          <span class="p">});</span>
          <span class="nx">Spotify</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsQuery</span><span class="p">,</span> <span class="s2">"track"</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsTracks</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">tracks</span><span class="p">.</span><span class="nx">items</span><span class="p">;</span>
          <span class="p">});</span>
        <span class="p">};</span>
    
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">searchRecommendations</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">checkIfSeedsInLimit</span><span class="p">())</span> <span class="p">{</span>
            <span class="nx">Spotify</span><span class="p">.</span><span class="nx">getRecommendations</span><span class="p">(</span><span class="nx">prepCriteria</span><span class="p">()).</span><span class="nx">then</span><span class="p">(</span>
              <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">SharingResultsService</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
                <span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s2">"/spotify-recommendations-app-js/#!/results"</span><span class="p">;</span>
              <span class="p">},</span>
              <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">alert</span><span class="p">(</span><span class="s2">"The access token expired. Please login again."</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">alert</span><span class="p">(</span><span class="s2">"You can select up to 5 different seeds."</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">};</span>
    
        <span class="nx">checkIfSeedsInLimit</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span>
            <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span> <span class="o">==</span> <span class="kc">undefined</span> <span class="o">||</span>
            <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">artists</span> <span class="o">==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span>
              <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">tracks</span> <span class="o">==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span>
              <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">genres</span> <span class="o">==</span> <span class="kc">undefined</span><span class="p">)</span>
          <span class="p">)</span> <span class="p">{</span>
            <span class="nx">alert</span><span class="p">(</span><span class="s2">"You did not define any seeds"</span><span class="p">);</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
    
          <span class="kd">let</span> <span class="nx">numberOfSeeds</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">artists</span> <span class="o">==</span> <span class="kc">undefined</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">numberOfSeeds</span> <span class="o">=</span>
              <span class="nx">numberOfSeeds</span> <span class="o">+</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">artists</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">genres</span> <span class="o">==</span> <span class="kc">undefined</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">numberOfSeeds</span> <span class="o">=</span>
              <span class="nx">numberOfSeeds</span> <span class="o">+</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">genres</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">tracks</span> <span class="o">==</span> <span class="kc">undefined</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">numberOfSeeds</span> <span class="o">=</span>
              <span class="nx">numberOfSeeds</span> <span class="o">+</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">tracks</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;</span> <span class="nx">numberOfSeeds</span> <span class="o">&amp;&amp;</span> <span class="mi">5</span> <span class="o">&gt;=</span> <span class="nx">numberOfSeeds</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">};</span>
    
        <span class="nx">prepCriteria</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="kd">let</span> <span class="nx">criteria</span> <span class="o">=</span> <span class="p">{};</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">artists</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">criteria</span><span class="p">.</span><span class="nx">seed_artists</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">artists</span><span class="p">.</span><span class="nx">join</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">tracks</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">criteria</span><span class="p">.</span><span class="nx">seed_tracks</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">tracks</span><span class="p">.</span><span class="nx">join</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">genres</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">criteria</span><span class="p">.</span><span class="nx">seed_genres</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">seedsSelection</span><span class="p">.</span><span class="nx">genres</span><span class="p">.</span><span class="nx">join</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">limitInput</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">limitInput</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">limitInput</span> <span class="o">&lt;</span> <span class="mi">101</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">criteria</span><span class="p">.</span><span class="nx">limit</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">limitInput</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">durationInput</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">durationInput</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_duration_ms</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">durationInput</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">keyInput</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">keyInput</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">keyInput</span> <span class="o">&lt;</span> <span class="mi">12</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_key</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">keyInput</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">isMajorSelect</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_mode</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">isMajorSelect</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">tempoInput</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">tempoInput</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_tempo</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">tempoInput</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">acousticnessSelect</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_acousticness</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">acousticnessSelect</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">danceabilitySelect</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_danceability</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">danceabilitySelect</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">energySelect</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_energy</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">energySelect</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">livenessSelect</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_liveness</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">livenessSelect</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">instrumentalnessSelect</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_instrumentalness</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">instrumentalnessSelect</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">popularitySelect</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_popularity</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">popularitySelect</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">speechinessSelect</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_speechiness</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">speechinessSelect</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">valenceSelect</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">criteria</span><span class="p">.</span><span class="nx">target_valence</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">valenceSelect</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">criteria</span><span class="p">;</span>
        <span class="p">};</span>
      <span class="p">}</span>
    <span class="p">]);</span>
</code></pre></div></div>

<p>I to w zasadzie tyle… Pozostaje oczyszczenie elementu head w index.html ze zbędnych już bibliotek i dodanie Shards. Plus pomniejsze zmiany w CSS i atrybutach klas dla poszczególnych elementów strony :).</p>

<h4 id="czego-nie-ma-co-można-zmienić">Czego nie ma, co można zmienić</h4>

<ul>
  <li>dodać prawdziwą walidację pól opcjonalnych, tak aby użytkownik nie mógł wyszukać rekomendacji, jeśli łamie zakres danego pola</li>
  <li>dodać obsługę alertów, a nie polegać na wbudowanych w JS :)</li>
  <li>polepszyć obsługę błędów</li>
  <li>
    <ul>
      <li>zwiększyć czytelność JS, np. podzielić nasz plik JSowy</li>
    </ul>
  </li>
  <li>przesunąć Stringi do osobnego pliku i je wczytywać podług potrzeb</li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#coding" class="page__taxonomy-item" rel="tag">coding</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#blog" class="page__taxonomy-item" rel="tag">blog</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2018-04-13T17:02:00+02:00">April 13, 2018</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="/blog/SpotiBar/" class="pagination--pager" title="[OLD] SpotiBar: Spotify + Foobar
">Previous</a>
    
    
      <a href="/blog/Viewmodel/" class="pagination--pager" title="[OLD] ISS, Architecture: ViewModel, LiveData, Retrofit
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><input type="search" id="search" aria-placeholder="Enter your search term..." class="search-input" tabindex="-1" placeholder="Enter your search term..." />
    <div id="results" class="results"></div></div>

      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2019 Michał Wyrwa. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin="anonymous"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
